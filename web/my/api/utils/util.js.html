<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>util.js - Documentation</title>
    
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <script src="scripts/nav.js" defer></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav >
    
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="module-$ui_utils_events-Events.html">Events</a><ul class='methods'><li data-type='method'><a href="module-$ui_utils_events-Events.html#$emit">$emit</a></li><li data-type='method'><a href="module-$ui_utils_events-Events.html#$off">$off</a></li><li data-type='method'><a href="module-$ui_utils_events-Events.html#$on">$on</a></li><li data-type='method'><a href="module-$ui_utils_events-Events.html#$once">$once</a></li><li data-type='method'><a href="module-$ui_utils_events-Events.html#destroy">destroy</a></li><li data-type='method'><a href="module-$ui_utils_events-Events.html#off">off</a></li><li data-type='method'><a href="module-$ui_utils_events-Events.html#on">on</a></li></ul></li><li><a href="module-$ui_utils_messager.html">$ui/utils/messager</a><ul class='methods'><li data-type='method'><a href="module-$ui_utils_messager.html#bridgeHandler">bridgeHandler</a></li><li data-type='method'><a href="module-$ui_utils_messager.html#buildBridge">buildBridge</a></li><li data-type='method'><a href="module-$ui_utils_messager.html#destroy">destroy</a></li><li data-type='method'><a href="module-$ui_utils_messager.html#off">off</a></li><li data-type='method'><a href="module-$ui_utils_messager.html#pass">pass</a></li></ul></li><li><a href="module-$ui_utils_queue-Queue.html">Queue</a><ul class='methods'><li data-type='method'><a href="module-$ui_utils_queue-Queue.html#clear">clear</a></li><li data-type='method'><a href="module-$ui_utils_queue-Queue.html#destroy">destroy</a></li><li data-type='method'><a href="module-$ui_utils_queue-Queue.html#push">push</a></li><li data-type='method'><a href="module-$ui_utils_queue-Queue.html#run">run</a></li><li data-type='method'><a href="module-$ui_utils_queue-Queue.html#start">start</a></li><li data-type='method'><a href="module-$ui_utils_queue-Queue.html#stop">stop</a></li></ul></li><li><a href="module-$ui_utils_socket.html">$ui/utils/socket</a><ul class='methods'><li data-type='method'><a href="module-$ui_utils_socket.html#close">close</a></li><li data-type='method'><a href="module-$ui_utils_socket.html#connect">connect</a></li><li data-type='method'><a href="module-$ui_utils_socket.html#destroy">destroy</a></li><li data-type='method'><a href="module-$ui_utils_socket.html#getState">getState</a></li><li data-type='method'><a href="module-$ui_utils_socket.html#reconnect">reconnect</a></li><li data-type='method'><a href="module-$ui_utils_socket.html#send">send</a></li></ul></li></ul><h3>Modules</h3><ul><li><a href="module-$ui_utils_ajax.html">$ui/utils/ajax</a><ul class='methods'><li data-type='method'><a href="module-$ui_utils_ajax.html#.transformHandler">transformHandler</a></li></ul></li><li><a href="module-$ui_utils_axios.html">$ui/utils/axios</a></li><li><a href="module-$ui_utils_bom.html">$ui/utils/bom</a><ul class='methods'><li data-type='method'><a href="module-$ui_utils_bom.html#.exitFullScreen">exitFullScreen</a></li><li data-type='method'><a href="module-$ui_utils_bom.html#.fullScreen">fullScreen</a></li><li data-type='method'><a href="module-$ui_utils_bom.html#.isFullScreen">isFullScreen</a></li></ul></li><li><a href="module-$ui_utils_bridge.html">$ui/utils/bridge</a><ul class='methods'><li data-type='method'><a href="module-$ui_utils_bridge.html#.fire">fire</a></li><li data-type='method'><a href="module-$ui_utils_bridge.html#.on">on</a></li><li data-type='method'><a href="module-$ui_utils_bridge.html#.once">once</a></li><li data-type='method'><a href="module-$ui_utils_bridge.html#.provider">provider</a></li><li data-type='method'><a href="module-$ui_utils_bridge.html#.service">service</a></li></ul></li><li><a href="module-$ui_utils_bus.html">$ui/utils/bus</a></li><li><a href="module-$ui_utils_cookie.html">$ui/utils/cookie</a><ul class='methods'><li data-type='method'><a href="module-$ui_utils_cookie.html#.get">get</a></li><li data-type='method'><a href="module-$ui_utils_cookie.html#.has">has</a></li><li data-type='method'><a href="module-$ui_utils_cookie.html#.keys">keys</a></li><li data-type='method'><a href="module-$ui_utils_cookie.html#.remove">remove</a></li><li data-type='method'><a href="module-$ui_utils_cookie.html#.set">set</a></li></ul></li><li><a href="module-$ui_utils_crypto.html">$ui/utils/crypto</a><ul class='methods'><li data-type='method'><a href="module-$ui_utils_crypto.html#.base64Decode">base64Decode</a></li><li data-type='method'><a href="module-$ui_utils_crypto.html#.base64Encode">base64Encode</a></li><li data-type='method'><a href="module-$ui_utils_crypto.html#.decryptByDES">decryptByDES</a></li><li data-type='method'><a href="module-$ui_utils_crypto.html#.encryptByDES">encryptByDES</a></li><li data-type='method'><a href="module-$ui_utils_crypto.html#.md5">md5</a></li></ul></li><li><a href="module-$ui_utils_date.html">$ui/utils/date</a></li><li><a href="module-$ui_utils_dictionary.html">$ui/utils/dictionary</a><ul class='methods'><li data-type='method'><a href="module-$ui_utils_dictionary.html#.arrayToMap">arrayToMap</a></li><li data-type='method'><a href="module-$ui_utils_dictionary.html#.keysToMap">keysToMap</a></li><li data-type='method'><a href="module-$ui_utils_dictionary.html#.mapToArray">mapToArray</a></li><li data-type='method'><a href="module-$ui_utils_dictionary.html#.mapToKeys">mapToKeys</a></li></ul></li><li><a href="module-$ui_utils_dom.html">$ui/utils/dom</a><ul class='methods'><li data-type='method'><a href="module-$ui_utils_dom.html#.insertAfter">insertAfter</a></li><li data-type='method'><a href="module-$ui_utils_dom.html#.isHidden">isHidden</a></li><li data-type='method'><a href="module-$ui_utils_dom.html#.scrollTop">scrollTop</a></li></ul></li><li><a href="module-$ui_utils_download.html">$ui/utils/download</a><ul class='methods'><li data-type='method'><a href="module-$ui_utils_download.html#.download">download</a></li><li data-type='method'><a href="module-$ui_utils_download.html#.downloadBlob">downloadBlob</a></li><li data-type='method'><a href="module-$ui_utils_download.html#.downloadByData">downloadByData</a></li><li data-type='method'><a href="module-$ui_utils_download.html#.downloadByPost">downloadByPost</a></li><li data-type='method'><a href="module-$ui_utils_download.html#.stringToBlob">stringToBlob</a></li></ul></li><li><a href="module-$ui_utils_events.html">$ui/utils/events</a></li><li><a href="module-$ui_utils_excel.html">$ui/utils/excel</a><ul class='methods'><li data-type='method'><a href="module-$ui_utils_excel.html#.reader">reader</a></li></ul></li><li><a href="module-$ui_utils_helper.html">$ui/utils/helper</a><ul class='methods'><li data-type='method'><a href="module-$ui_utils_helper.html#.install">install</a></li></ul></li><li><a href="module-$ui_utils_log.html">$ui/utils/log</a><ul class='methods'><li data-type='method'><a href="module-$ui_utils_log.html#.create">create</a></li><li data-type='method'><a href="module-$ui_utils_log.html#.dir">dir</a></li><li data-type='method'><a href="module-$ui_utils_log.html#.error">error</a></li><li data-type='method'><a href="module-$ui_utils_log.html#.info">info</a></li><li data-type='method'><a href="module-$ui_utils_log.html#.log">log</a></li><li data-type='method'><a href="module-$ui_utils_log.html#.tip">tip</a></li><li data-type='method'><a href="module-$ui_utils_log.html#.warn">warn</a></li></ul></li><li><a href="module-$ui_utils_lunar.html">$ui/utils/lunar</a><ul class='methods'><li data-type='method'><a href="module-$ui_utils_lunar.html#.getFestivals">getFestivals</a></li></ul></li><li><a href="module-$ui_utils_messager.html">$ui/utils/messager</a><ul class='methods'><li data-type='method'><a href="module-$ui_utils_messager.html#bridgeHandler">bridgeHandler</a></li><li data-type='method'><a href="module-$ui_utils_messager.html#buildBridge">buildBridge</a></li><li data-type='method'><a href="module-$ui_utils_messager.html#destroy">destroy</a></li><li data-type='method'><a href="module-$ui_utils_messager.html#off">off</a></li><li data-type='method'><a href="module-$ui_utils_messager.html#pass">pass</a></li></ul></li><li><a href="module-$ui_utils_mock.html">$ui/utils/mock</a></li><li><a href="module-$ui_utils_money.html">$ui/utils/money</a><ul class='methods'><li data-type='method'><a href="module-$ui_utils_money.html#.format">format</a></li><li data-type='method'><a href="module-$ui_utils_money.html#.reverse">reverse</a></li></ul></li><li><a href="module-$ui_utils_queue.html">$ui/utils/queue</a></li><li><a href="module-$ui_utils_regex.html">$ui/utils/regex</a><ul class='methods'><li data-type='method'><a href="module-$ui_utils_regex.html#.isEmail">isEmail</a></li><li data-type='method'><a href="module-$ui_utils_regex.html#.isId">isId</a></li><li data-type='method'><a href="module-$ui_utils_regex.html#.isMobilePhone">isMobilePhone</a></li><li data-type='method'><a href="module-$ui_utils_regex.html#.isUrl">isUrl</a></li></ul></li><li><a href="module-$ui_utils_responsive.html">$ui/utils/responsive</a></li><li><a href="module-$ui_utils_skin.html">$ui/utils/skin</a><ul class='methods'><li data-type='method'><a href="module-$ui_utils_skin.html#.change">change</a></li><li data-type='method'><a href="module-$ui_utils_skin.html#.get">get</a></li></ul></li><li><a href="module-$ui_utils_socket.html">$ui/utils/socket</a><ul class='methods'><li data-type='method'><a href="module-$ui_utils_socket.html#close">close</a></li><li data-type='method'><a href="module-$ui_utils_socket.html#connect">connect</a></li><li data-type='method'><a href="module-$ui_utils_socket.html#destroy">destroy</a></li><li data-type='method'><a href="module-$ui_utils_socket.html#getState">getState</a></li><li data-type='method'><a href="module-$ui_utils_socket.html#reconnect">reconnect</a></li><li data-type='method'><a href="module-$ui_utils_socket.html#send">send</a></li></ul></li><li><a href="module-$ui_utils_storage.html">$ui/utils/storage</a><ul class='methods'><li data-type='method'><a href="module-$ui_utils_storage.html#.clear">clear</a></li><li data-type='method'><a href="module-$ui_utils_storage.html#.get">get</a></li><li data-type='method'><a href="module-$ui_utils_storage.html#.remove">remove</a></li><li data-type='method'><a href="module-$ui_utils_storage.html#.save">save</a></li></ul></li><li><a href="module-$ui_utils_tree.html">$ui/utils/tree</a><ul class='methods'><li data-type='method'><a href="module-$ui_utils_tree.html#.create">create</a></li><li data-type='method'><a href="module-$ui_utils_tree.html#.find">find</a></li><li data-type='method'><a href="module-$ui_utils_tree.html#.findPath">findPath</a></li></ul></li><li></li><li><a href="module-$ui_utils_tween.html">$ui/utils/tween</a><ul class='methods'><li data-type='method'><a href="module-$ui_utils_tween.html#.easeInBack">easeInBack</a></li><li data-type='method'><a href="module-$ui_utils_tween.html#.easeInBounce">easeInBounce</a></li><li data-type='method'><a href="module-$ui_utils_tween.html#.easeInCirc">easeInCirc</a></li><li data-type='method'><a href="module-$ui_utils_tween.html#.easeInCubic">easeInCubic</a></li><li data-type='method'><a href="module-$ui_utils_tween.html#.easeInElastic">easeInElastic</a></li><li data-type='method'><a href="module-$ui_utils_tween.html#.easeInExpo">easeInExpo</a></li><li data-type='method'><a href="module-$ui_utils_tween.html#.easeInOutBack">easeInOutBack</a></li><li data-type='method'><a href="module-$ui_utils_tween.html#.easeInOutBounce">easeInOutBounce</a></li><li data-type='method'><a href="module-$ui_utils_tween.html#.easeInOutCubic">easeInOutCubic</a></li><li data-type='method'><a href="module-$ui_utils_tween.html#.easeInOutQuad">easeInOutQuad</a></li><li data-type='method'><a href="module-$ui_utils_tween.html#.easeInOutQuart">easeInOutQuart</a></li><li data-type='method'><a href="module-$ui_utils_tween.html#.easeInOutQuint">easeInOutQuint</a></li><li data-type='method'><a href="module-$ui_utils_tween.html#.easeInOutSine">easeInOutSine</a></li><li data-type='method'><a href="module-$ui_utils_tween.html#.easeInQuad">easeInQuad</a></li><li data-type='method'><a href="module-$ui_utils_tween.html#.easeInQuart">easeInQuart</a></li><li data-type='method'><a href="module-$ui_utils_tween.html#.easeInQuint">easeInQuint</a></li><li data-type='method'><a href="module-$ui_utils_tween.html#.easeInSine">easeInSine</a></li><li data-type='method'><a href="module-$ui_utils_tween.html#.easeOutBack">easeOutBack</a></li><li data-type='method'><a href="module-$ui_utils_tween.html#.easeOutBounce">easeOutBounce</a></li><li data-type='method'><a href="module-$ui_utils_tween.html#.easeOutCirc">easeOutCirc</a></li><li data-type='method'><a href="module-$ui_utils_tween.html#.easeOutCubic">easeOutCubic</a></li><li data-type='method'><a href="module-$ui_utils_tween.html#.easeOutElastic">easeOutElastic</a></li><li data-type='method'><a href="module-$ui_utils_tween.html#.easeOutExpo">easeOutExpo</a></li><li data-type='method'><a href="module-$ui_utils_tween.html#.easeOutQuad">easeOutQuad</a></li><li data-type='method'><a href="module-$ui_utils_tween.html#.easeOutQuart">easeOutQuart</a></li><li data-type='method'><a href="module-$ui_utils_tween.html#.easeOutQuint">easeOutQuint</a></li><li data-type='method'><a href="module-$ui_utils_tween.html#.easeOutSine">easeOutSine</a></li></ul></li><li><a href="module-$ui_utils_url.html">$ui/utils/url</a><ul class='methods'><li data-type='method'><a href="module-$ui_utils_url.html#.appendQuery">appendQuery</a></li><li data-type='method'><a href="module-$ui_utils_url.html#.getHost">getHost</a></li><li data-type='method'><a href="module-$ui_utils_url.html#.getParams">getParams</a></li><li data-type='method'><a href="module-$ui_utils_url.html#.parse">parse</a></li><li data-type='method'><a href="module-$ui_utils_url.html#.stringify">stringify</a></li></ul></li><li><a href="module-$ui_utils_util.html">$ui/utils/util</a><ul class='methods'><li data-type='method'><a href="module-$ui_utils_util.html#.cancelAnimationFrame">cancelAnimationFrame</a></li><li data-type='method'><a href="module-$ui_utils_util.html#.cloneDeep">cloneDeep</a></li><li data-type='method'><a href="module-$ui_utils_util.html#.debounce">debounce</a></li><li data-type='method'><a href="module-$ui_utils_util.html#.get">get</a></li><li data-type='method'><a href="module-$ui_utils_util.html#.grouping">grouping</a></li><li data-type='method'><a href="module-$ui_utils_util.html#.guid">guid</a></li><li data-type='method'><a href="module-$ui_utils_util.html#.isEqual">isEqual</a></li><li data-type='method'><a href="module-$ui_utils_util.html#.pager">pager</a></li><li data-type='method'><a href="module-$ui_utils_util.html#.requestAnimationFrame">requestAnimationFrame</a></li><li data-type='method'><a href="module-$ui_utils_util.html#.set">set</a></li><li data-type='method'><a href="module-$ui_utils_util.html#.throttle">throttle</a></li><li data-type='method'><a href="module-$ui_utils_util.html#.uid">uid</a></li></ul></li></ul><h3>Events</h3><ul><li><a href="module-$ui_utils_socket.html#~event:close">close</a></li><li><a href="module-$ui_utils_socket.html#~event:error">error</a></li><li><a href="module-$ui_utils_socket.html#~event:message">message</a></li><li><a href="module-$ui_utils_socket.html#~event:open">open</a></li><li><a href="module-utils_queue-Queue.html#event:complete">complete</a></li><li><a href="module-utils_queue-Queue.html#event:error">error</a></li><li><a href="module-utils_queue-Queue.html#event:success">success</a></li></ul><h3>Global</h3><ul><li><a href="global.html#isFlexSupported">isFlexSupported</a></li><li><a href="global.html#isStyleSupport">isStyleSupport</a></li></ul>
</nav>

<div id="main">
    
    <h1 class="page-title">util.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * 提供常用辅助函数
 * @module $ui/utils/util
 */


const _isEqual = require('lodash/isEqual')
const _get = require('lodash/get')
const _set = require('lodash/set')
const _cloneDeep = require('lodash/cloneDeep')

// requestAnimationFrame 适配函数
const raFrame = window.requestAnimationFrame || window.webkitRequestAnimationFrame || function (callback) {
  return window.setTimeout(callback, 1000 / 60);
};

/**
 * 动画延时函数
 * @function
 * @param {function} callback 动画回调函数
 * @return {number} id 标识
 *
 * @example
 *
 * import {requestAnimationFrame} from '$ui/utils/util'
 * requestAnimationFrame(() => {
 *   // do sth ....
 *
 * })
 */
export const requestAnimationFrame = raFrame

/**
 * 清除动画延时
 * @function
 * @param {number} id 标识
 *
 * @example
 *
 * import {requestAnimationFrame, cancelAnimationFrame} from '$ui/utils/util'
 * const id = requestAnimationFrame(()= > {
 *   // do sth
 * })
 * cancelAnimationFrame(id)
 */
export const cancelAnimationFrame = window.cancelAnimationFrame || window.webkitRequestAnimationFrame || function (id) {
  window.clearTimeout(id);
};


/**
 * 判断两个对象是否相等
 * @param {*} object 对象1
 * @param {*} other 对象2
 * @return {boolean}
 */
export function isEqual(object, other) {
  return _isEqual(object, other)
}

/**
 * 防抖函数
 * @param {function} fn 事件处理函数
 * @param {number} [delay=20] 延迟时间
 * @param {boolean} [isImmediate=false] 是否立刻执行
 * @param {object} [context=this] 上下文对象
 * @returns {Function} 事件处理函数
 */
export function debounce(fn, delay = 20, isImmediate = false, context = this) {
  // 使用闭包，保存执行状态，控制函数调用顺序
  let timer;
  
  return function () {
    const _args = [].slice.call(arguments)
    
    clearTimeout(timer);
    
    const _fn = function () {
      timer = null;
      if (!isImmediate) fn.apply(context, _args);
    };
    
    // 是否滚动时立刻执行
    const callNow = !timer &amp;&amp; isImmediate;
    
    timer = setTimeout(_fn, delay);
    
    if (callNow) fn.apply(context, _args);
  }
}

/**
 * 节流函数
 * @param {function} fn 事件处理函数
 * @param {object} [context=this] 上下文对象
 * @param {boolean} [isImmediate=false] 是否立刻执行
 * @returns {Function} 事件处理函数
 */
export function throttle(fn, context = this, isImmediate = false) {
  let isLocked;
  return function () {
    const _args = arguments
    
    if (isLocked) return
    
    isLocked = true
    raFrame(function () {
      isLocked = false;
      fn.apply(context, _args)
    })
    
    isImmediate &amp;&amp; fn.apply(context, _args)
  }
}


/**
 * 生成随机GUID
 * @return {string}
 */
export function guid() {
  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {
    const r = Math.random() * 16 | 0, v = c === 'x' ? r : (r &amp; 0x3 | 0x8);
    return v.toString(16);
  }).toUpperCase();
}

/**
 * 生成唯一id
 * @return {string}
 */
export function uid() {
  const rnd = Math.floor(Math.random() * 1000)
  const timestamp = new Date().getTime()
  return [timestamp, rnd].join('')
}

/**
 * 根据path查找对象或数组中的某个属性
 * @param {object|array} object 要检索的对象
 * @param {string|array} path 要获取属性的路径
 * @param {string} [defaultValue] 如果解析值是 undefined ，这值会被返回。
 * @return {undefined|*}
 *
 * @example
 *
 *  import {get} from '$ui/utils/util'
 *  const object = { 'a': [{ 'b': { 'c': 3 } }] };
 *  get(object, 'a[0].b.c') // -> 3
 */
export function get(object, path, defaultValue) {
  return _get(object, path, defaultValue)
}

/**
 * 设置 object对象中对应 path 属性路径上的值，如果path不存在，则创建。 缺少的索引属性会创建为数组，而缺少的属性会创建为对象
 * @param {object} object 要修改的对象
 * @param {string|array} path 要设置的对象路径
 * @param {*} value 要设置的值
 */
export function set(object, path, value) {
  return _set(object, path, value)
}

/**
 * 深拷贝
 * @param {*} value  要深拷贝的值
 * @return {*} 返回拷贝后的值
 */
export function cloneDeep(value) {
  return _cloneDeep(value)
}

/**
 * 对数组按制定字段名称进行分组
 * @param {Array} data 数组数组
 * @param {string} [field=group] 分组字段名称
 * @returns {object} 结果
 *
 * @example
 * [{name:1, group:'a'},{name:2, group:'a'}, {name:3, group:'b'}]  ->
 * {
 *  'a':[{name:1, group:'a'}, {name:2, group:'a'}]
 *  'b': [{name:3, group:'b'}]
 * }
 */
export function grouping(data = [], field = 'group') {
  const result = {
    default: []
  }
  data.forEach(item => {
    const group = item[field]
    if (group) {
      if (!result[group]) {
        result[group] = []
      }
      result[group].push(item)
    } else {
      result.default.push(item)
    }
  })
  return result
}



/**
 * 分页获取数据
 * @param {Array} data 源数据
 * @param {number} [page=1] 当前页面，1开始
 * @param {number} [size=10] 页大小，默认10
 * @return {Array}
 */
export function pager(data, page = 1, size = 10) {
  if (!data) return []
  const start = (page - 1) * size
  const end = start + size
  return data.length > start ? data.slice(start, end) : []
}

</code></pre>
        </article>
    </section>





    
</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.6</a> on Thu Sep 24 2020 11:07:46 GMT+0800 (China Standard Time) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/polyfill.js"></script>
<script src="scripts/linenumber.js"></script>




<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?c4e5f73318b5cb0c389e3d9a05f831cc";
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
})();
</script>

</body>
</html>
